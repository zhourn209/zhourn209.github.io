<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>æˆ‘çš„å½±å‰§ Â· äº‘ç«¯åŒæ­¥ç‰ˆ</title>
    <style>
        /* å½»åº•é‡ç½®ï¼Œç»Ÿä¸€æ¸²æŸ“ + é€šç”¨ç²—åœ†å­—ä½“ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang TC', 'PingFang SC', 'Microsoft JhengHei', 'Microsoft YaHei', 'Helvetica Neue', 'Noto Sans CJK', 'WenQuanYi Micro Hei', sans-serif !important;
            font-weight: 600 !important;
            white-space: normal !important;
            word-break: break-word !important;
            overflow-wrap: break-word !important;
            word-wrap: break-word !important;
            text-overflow: clip !important;
            line-height: 1.5 !important;
        }

        body {
            background: #f4f6fa;
            padding: 12px;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        /* å¤´éƒ¨ */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding: 0 4px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .main-title {
            font-size: 28px;
            font-weight: 700;
            color: #1e293b;
        }

        .btn-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .btn {
            background: white;
            border: 1px solid #cbd5e1;
            border-radius: 40px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            color: #1e293b;
            cursor: pointer;
            touch-action: manipulation;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
            white-space: nowrap;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #8b5cf6;
            border-color: #7c3aed;
            color: white;
        }

        .btn-success {
            background: #10b981;
            border-color: #059669;
            color: white;
        }

        .btn-warning {
            background: #f59e0b;
            border-color: #d97706;
            color: white;
        }

        .btn:active {
            transform: scale(0.97);
            filter: brightness(0.95);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        #fileImport {
            display: none;
        }

        /* æ·»åŠ é¢æ¿ */
        .add-panel {
            background: white;
            border-radius: 28px;
            padding: 16px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            border: 1px solid #e2e8f0;
        }

        .add-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .add-panel input, .add-panel select {
            flex: 2 1 200px;
            padding: 12px 16px;
            border-radius: 40px;
            border: 1px solid #d1d5db;
            background: white;
            font-size: 16px;
            outline: none;
            width: 100%;
        }

        .add-panel input:focus, .add-panel select:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        .add-panel select {
            flex: 1 1 120px;
        }

        .add-panel .btn-primary {
            width: 100%;
            justify-content: center;
            padding: 12px;
            font-size: 16px;
        }

        .subcategory-select.hidden {
            display: none;
        }

        /* GitHub åŒæ­¥é¢æ¿ */
        .sync-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 28px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .sync-panel h3 {
            font-size: 18px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sync-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 13px;
            background: rgba(255,255,255,0.2);
            margin-bottom: 12px;
        }

        .sync-status.online {
            background: rgba(16, 185, 129, 0.3);
        }

        .sync-status.offline {
            background: rgba(239, 68, 68, 0.3);
        }

        .sync-status.syncing {
            background: rgba(245, 158, 11, 0.3);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .sync-inputs {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 12px;
        }

        .sync-inputs input {
            padding: 10px 14px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 14px;
            outline: none;
        }

        .sync-inputs input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .sync-inputs input:focus {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.5);
        }

        .sync-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .sync-actions .btn {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.3);
            color: white;
            font-size: 13px;
            padding: 8px 14px;
        }

        .sync-actions .btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .sync-info {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 10px;
            line-height: 1.6;
        }

        .sync-info a {
            color: #ffd700;
            text-decoration: underline;
        }

        /* ä¸‰æ å¡ç‰‡ */
        .dashboard {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .column {
            background: white;
            border-radius: 28px;
            padding: 18px 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #e9eef2;
        }

        .column-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid;
            font-size: 22px;
            font-weight: 700;
        }

        .col-watching .column-header {
            color: #b45309;
            border-bottom-color: #fbbf24;
        }
        .col-completed .column-header {
            color: #0b5e42;
            border-bottom-color: #34d399;
        }
        .col-planned .column-header {
            color: #1e4b8b;
            border-bottom-color: #60a5fa;
        }

        .count-badge {
            background: #e9eef2;
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 500;
        }

        .subcategory-section {
            background: #f8fafc;
            border-radius: 20px;
            padding: 14px 12px;
            margin-bottom: 16px;
        }

        .subcategory-title {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .movie-list, .subcategory-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .movie-item {
            background: white;
            border-radius: 24px;
            border: 1px solid #e9eef2;
            display: flex;
            align-items: center;
            padding: 8px 8px 8px 14px;
            gap: 4px;
            min-height: 48px;
            transition: transform 0.1s;
        }

        .movie-item:active {
            background: #f1f5f9;
            transform: scale(0.99);
        }

        .movie-title {
            flex: 1;
            font-size: 15px;
            font-weight: 500;
            color: #1e293b;
            padding: 4px 0;
            cursor: text;
            background: transparent;
            border: none;
            outline: none;
            white-space: normal !important;
            word-break: break-word !important;
            display: block;
            width: 100%;
        }

        .movie-title:focus {
            background: #f0f3f8;
            border-radius: 16px;
            padding-left: 8px;
        }

        .item-actions {
            display: flex;
            gap: 2px;
            flex-shrink: 0;
        }

        .item-btn {
            background: #f1f5f9;
            border: none;
            border-radius: 30px;
            width: 34px;
            height: 34px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            touch-action: manipulation;
            color: #475569;
            transition: all 0.2s;
        }

        .item-btn:active {
            background: #cbd5e1;
            transform: scale(0.94);
        }

        .delete-btn:active {
            background: #fee2e2;
            color: #b91c1c;
        }

        .move-btn:active {
            background: #d1fae5;
            color: #0b5e42;
        }

        .empty-message {
            color: #94a3b8;
            text-align: center;
            padding: 16px 12px;
            background: #f1f5f9;
            border-radius: 30px;
            font-size: 14px;
            border: 1px dashed #cbd5e1;
        }

        .footer-note {
            margin-top: 24px;
            text-align: center;
            color: #64748b;
            font-size: 13px;
            border-top: 1px solid #e2e8f0;
            padding-top: 18px;
        }

        /* æç¤ºæ¶ˆæ¯ */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #1e293b;
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 14px;
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .toast.success { background: #10b981; }
        .toast.error { background: #ef4444; }
        .toast.warning { background: #f59e0b; }

        /* å†²çªè§£å†³å¯¹è¯æ¡† */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 24px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .modal h3 {
            font-size: 20px;
            margin-bottom: 16px;
            color: #1e293b;
        }

        .modal p {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            flex-direction: column;
        }

        .modal-actions .btn {
            width: 100%;
            justify-content: center;
        }

        .last-sync-info {
            font-size: 11px;
            opacity: 0.8;
            margin-top: 8px;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="main-title">ğŸ¬ æˆ‘çš„å½±å‰§</div>
        <div class="btn-group">
            <button class="btn" id="exportBtn">ğŸ“¤ å¯¼å‡º</button>
            <label class="btn" id="importLabel">ğŸ“¥ å¯¼å…¥
                <input type="file" id="fileImport" accept=".json,application/json">
            </label>
        </div>
    </div>

    <!-- GitHub åŒæ­¥é¢æ¿ -->
    <div class="sync-panel" id="syncPanel">
        <h3>â˜ï¸ GitHub äº‘ç«¯åŒæ­¥</h3>
        <div class="sync-status offline" id="syncStatus">
            <span>âšª</span> æœªè¿æ¥
        </div>
        
        <div class="sync-inputs" id="syncInputs">
            <input type="password" id="githubToken" placeholder="GitHub Personal Access Token (éœ€ gist æƒé™)">
            <input type="text" id="gistId" placeholder="Gist ID (å¯é€‰ï¼Œç•™ç©ºè‡ªåŠ¨åˆ›å»º)">
        </div>
        
        <div class="sync-actions">
            <button class="btn" id="connectBtn">ğŸ”Œ è¿æ¥</button>
            <button class="btn" id="syncUpBtn" disabled>â¬†ï¸ ä¸Šä¼ </button>
            <button class="btn" id="syncDownBtn" disabled>â¬‡ï¸ ä¸‹è½½</button>
            <button class="btn" id="autoSyncBtn" disabled>ğŸ”„ è‡ªåŠ¨åŒæ­¥</button>
            <button class="btn" id="disconnectBtn" disabled>âŒ æ–­å¼€</button>
        </div>
        
        <div class="sync-info">
            ğŸ’¡ <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong><br>
            1. åœ¨ <a href="https://github.com/settings/tokens/new" target="_blank">GitHub Settings</a> åˆ›å»º Tokenï¼Œå‹¾é€‰ <strong>gist</strong> æƒé™<br>
            2. é¦–æ¬¡ä½¿ç”¨å¯ç•™ç©º Gist IDï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„ Gist<br>
            3. Token ä»…ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨<br>
            <div class="last-sync-info" id="lastSyncInfo"></div>
        </div>
    </div>

    <!-- æ·»åŠ é¢æ¿ -->
    <div class="add-panel">
        <input type="text" id="newTitle" placeholder="è¾“å…¥å‰§å...">
        <div class="add-row">
            <select id="mainCategory" class="category-select">
                <option value="watching">ğŸ¬ è¿›è¡Œä¸­</option>
                <option value="completed" selected>âœ… å·²å®Œæˆ</option>
                <option value="planned">ğŸ“… è®¡åˆ’ä¸­</option>
            </select>
            <select id="subCategory" class="subcategory-select">
                <option value="usuk">ğŸŒ æ¬§ç¾å‰§</option>
                <option value="asia">ğŸŒ¸ æ—¥éŸ©å‰§</option>
                <option value="movie">ğŸï¸ ç”µå½±</option>
            </select>
        </div>
        <button class="btn btn-primary" id="addBtn">â• æ·»åŠ å‰§é›†</button>
    </div>

    <div class="dashboard">
        <!-- è¿›è¡Œä¸­ -->
        <div class="column col-watching">
            <div class="column-header">
                <span>â³ è¿›è¡Œä¸­</span>
                <span class="count-badge" id="countWatching">0</span>
            </div>
            <ul class="movie-list" id="listWatching"></ul>
        </div>

        <!-- å·²å®Œæˆ -->
        <div class="column col-completed">
            <div class="column-header">
                <span>âœ… å·²å®Œæˆ</span>
                <span class="count-badge" id="countCompleted">0</span>
            </div>
            <div>
                <div class="subcategory-section">
                    <div class="subcategory-title"><span>ğŸŒ æ¬§ç¾å‰§</span><span class="count-badge" id="countUsuk">0</span></div>
                    <ul class="subcategory-list" id="listUsuk"></ul>
                </div>
                <div class="subcategory-section">
                    <div class="subcategory-title"><span>ğŸŒ¸ æ—¥éŸ©å‰§</span><span class="count-badge" id="countAsia">0</span></div>
                    <ul class="subcategory-list" id="listAsia"></ul>
                </div>
                <div class="subcategory-section">
                    <div class="subcategory-title"><span>ğŸï¸ ç”µå½±</span><span class="count-badge" id="countMovie">0</span></div>
                    <ul class="subcategory-list" id="listMovie"></ul>
                </div>
            </div>
        </div>

        <!-- è®¡åˆ’ä¸­ -->
        <div class="column col-planned">
            <div class="column-header">
                <span>ğŸ“… è®¡åˆ’ä¸­</span>
                <span class="count-badge" id="countPlanned">0</span>
            </div>
            <ul class="movie-list" id="listPlanned"></ul>
        </div>
    </div>

    <div class="footer-note">
        âœ¨ åŒå‡»æ–‡å­—ç¼–è¾‘ Â· è¿›è¡Œä¸­æ¡ç›®â¡ï¸ç§»å…¥æ¬§ç¾å‰§ Â· ä¸­æ–‡æŒ‰æ‹¼éŸ³æ’åº Â· æ”¯æŒ GitHub Gist äº‘ç«¯åŒæ­¥
    </div>
</div>

<!-- æç¤ºæ¶ˆæ¯ -->
<div class="toast" id="toast"></div>

<!-- å†²çªè§£å†³å¯¹è¯æ¡† -->
<div class="modal-overlay" id="conflictModal">
    <div class="modal">
        <h3>âš ï¸ æ•°æ®å†²çª</h3>
        <p>äº‘ç«¯æ•°æ®ä¸æœ¬åœ°æ•°æ®ä¸ä¸€è‡´ã€‚è¯·é€‰æ‹©ä¿ç•™å“ªä¸ªç‰ˆæœ¬ï¼š</p>
        <div class="modal-actions">
            <button class="btn btn-primary" id="keepLocalBtn">ğŸ’» ä¿ç•™æœ¬åœ°ç‰ˆæœ¬ (è¦†ç›–äº‘ç«¯)</button>
            <button class="btn btn-success" id="keepCloudBtn">â˜ï¸ ä¿ç•™äº‘ç«¯ç‰ˆæœ¬ (è¦†ç›–æœ¬åœ°)</button>
            <button class="btn btn-warning" id="mergeBtn">ğŸ”€ æ™ºèƒ½åˆå¹¶ (æ¨è)</button>
            <button class="btn" id="cancelSyncBtn">âŒ å–æ¶ˆ</button>
        </div>
    </div>
</div>

<script>
    (function() {
        // ========== æ•°æ®å­˜å‚¨ ==========
        let watchingTitles = [];
        let completed = { usuk: [], asia: [], movie: [] };
        let plannedTitles = [];
        
        // GitHub åŒæ­¥çŠ¶æ€
        let syncState = {
            connected: false,
            token: '',
            gistId: '',
            lastSyncTime: null,
            autoSync: false
        };

        const GIST_FILENAME = 'my-series-data.json';
        const GIST_DESCRIPTION = 'æˆ‘çš„å½±å‰§è¿½è¸ªæ•°æ® - ç”± æˆ‘çš„å½±å‰§ åº”ç”¨è‡ªåŠ¨åˆ›å»º';

        // ========== æ‹¼éŸ³æ’åºå‡½æ•° ==========
        function compareTitles(a, b) {
            const cleanA = a.replace(/[:\-*ã€ã€‘\[\]\(\)\s+]/g, '').trim();
            const cleanB = b.replace(/[:\-*ã€ã€‘\[\]\(\)\s+]/g, '').trim();
            
            const firstCharA = cleanA.charAt(0);
            const firstCharB = cleanB.charAt(0);
            
            const getType = (char) => {
                if (char >= '0' && char <= '9') return 1;
                if ((char >= 'a' && char <= 'z') || (char >= 'A' && char <= 'Z')) return 2;
                return 3;
            };
            
            const typeA = getType(firstCharA);
            const typeB = getType(firstCharB);
            
            if (typeA !== typeB) {
                return typeA - typeB;
            }
            
            return cleanA.localeCompare(cleanB, 'zh-CN', { 
                sensitivity: 'base',
                ignorePunctuation: true,
                numeric: true
            });
        }

        function cleanAsterisk(str) {
            return str.replace(/\*+$/g, '').trim();
        }

        // ========== UI è¾…åŠ©å‡½æ•° ==========
        function showToast(message, type = 'success', duration = 3000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        function updateSyncStatus(status, text) {
            const statusEl = document.getElementById('syncStatus');
            statusEl.className = `sync-status ${status}`;
            statusEl.innerHTML = `<span>${status === 'online' ? 'ğŸŸ¢' : status === 'syncing' ? 'ğŸŸ¡' : 'âšª'}</span> ${text}`;
        }

        function updateLastSyncInfo() {
            const infoEl = document.getElementById('lastSyncInfo');
            if (syncState.lastSyncTime) {
                const date = new Date(syncState.lastSyncTime);
                infoEl.textContent = `ä¸Šæ¬¡åŒæ­¥: ${date.toLocaleString()}`;
            } else {
                infoEl.textContent = '';
            }
        }

        // ========== GitHub Gist API æ“ä½œ ==========
        
        // åˆ›å»ºæ–°çš„ Gist
        async function createGist(token, data) {
            const response = await fetch('https://api.github.com/gists', {
                method: 'POST',
                headers: {
                    'Authorization': `token ${token}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    description: GIST_DESCRIPTION,
                    public: false, // ç§å¯† Gist
                    files: {
                        [GIST_FILENAME]: {
                            content: JSON.stringify(data, null, 2)
                        }
                    }
                })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.message || 'åˆ›å»º Gist å¤±è´¥');
            }

            return await response.json();
        }

        // æ›´æ–°ç°æœ‰ Gist
        async function updateGist(token, gistId, data) {
            const response = await fetch(`https://api.github.com/gists/${gistId}`, {
                method: 'PATCH',
                headers: {
                    'Authorization': `token ${token}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    description: GIST_DESCRIPTION,
                    files: {
                        [GIST_FILENAME]: {
                            content: JSON.stringify(data, null, 2)
                        }
                    }
                })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.message || 'æ›´æ–° Gist å¤±è´¥');
            }

            return await response.json();
        }

        // è·å– Gist å†…å®¹
        async function getGist(token, gistId) {
            const response = await fetch(`https://api.github.com/gists/${gistId}`, {
                method: 'GET',
                headers: {
                    'Authorization': `token ${token}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            });

            if (!response.ok) {
                if (response.status === 404) {
                    throw new Error('Gist ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ Gist ID æ˜¯å¦æ­£ç¡®');
                }
                const error = await response.json();
                throw new Error(error.message || 'è·å– Gist å¤±è´¥');
            }

            const gist = await response.json();
            const file = gist.files[GIST_FILENAME];
            
            if (!file) {
                throw new Error('Gist ä¸­æ²¡æœ‰æ‰¾åˆ°æ•°æ®æ–‡ä»¶');
            }

            // è·å–æ–‡ä»¶å†…å®¹
            const contentResponse = await fetch(file.raw_url);
            const content = await contentResponse.text();
            
            return {
                gist: gist,
                data: JSON.parse(content),
                updatedAt: gist.updated_at
            };
        }

        // éªŒè¯ Token æœ‰æ•ˆæ€§
        async function validateToken(token) {
            const response = await fetch('https://api.github.com/user', {
                headers: {
                    'Authorization': `token ${token}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            });
            return response.ok;
        }

        // ========== åŒæ­¥é€»è¾‘ ==========
        
        function getCurrentData() {
            return {
                watching: watchingTitles,
                completed: completed,
                planned: plannedTitles,
                exportDate: new Date().toISOString(),
                version: '2.0'
            };
        }

        function loadData(data) {
            if (Array.isArray(data.watching)) watchingTitles = data.watching.map(s => s.trim()).filter(s => s);
            if (data.completed && typeof data.completed === 'object') {
                completed = {
                    usuk: (data.completed.usuk || []).map(s => s.trim()).filter(s => s),
                    asia: (data.completed.asia || []).map(s => s.trim()).filter(s => s),
                    movie: (data.completed.movie || []).map(s => s.trim()).filter(s => s)
                };
            }
            if (Array.isArray(data.planned)) plannedTitles = data.planned.map(s => s.trim()).filter(s => s);
            renderAll();
        }

        // æ™ºèƒ½åˆå¹¶æ•°æ®
        function mergeData(local, remote) {
            const merged = {
                watching: [...new Set([...local.watching, ...remote.watching])],
                completed: {
                    usuk: [...new Set([...local.completed.usuk, ...remote.completed.usuk])],
                    asia: [...new Set([...local.completed.asia, ...remote.completed.asia])],
                    movie: [...new Set([...local.completed.movie, ...remote.completed.movie])]
                },
                planned: [...new Set([...local.planned, ...remote.planned])]
            };
            return merged;
        }

        // è¿æ¥åˆ° GitHub
        async function connectToGitHub() {
            const token = document.getElementById('githubToken').value.trim();
            let gistId = document.getElementById('gistId').value.trim();

            if (!token) {
                showToast('è¯·è¾“å…¥ GitHub Token', 'error');
                return;
            }

            updateSyncStatus('syncing', 'è¿æ¥ä¸­...');

            try {
                // éªŒè¯ Token
                const isValid = await validateToken(token);
                if (!isValid) {
                    throw new Error('Token æ— æ•ˆï¼Œè¯·æ£€æŸ¥æ˜¯å¦æ­£ç¡®');
                }

                syncState.token = token;

                // å¦‚æœæ²¡æœ‰ Gist IDï¼Œåˆ›å»ºæ–°çš„
                if (!gistId) {
                    showToast('æ­£åœ¨åˆ›å»ºæ–°çš„ Gist...', 'warning');
                    const data = getCurrentData();
                    const gist = await createGist(token, data);
                    gistId = gist.id;
                    document.getElementById('gistId').value = gistId;
                    showToast(`âœ… å·²åˆ›å»ºæ–°çš„ Gist: ${gistId}`);
                } else {
                    // éªŒè¯ Gist æ˜¯å¦å­˜åœ¨
                    try {
                        await getGist(token, gistId);
                        showToast('âœ… å·²è¿æ¥åˆ°ç°æœ‰ Gist');
                    } catch (e) {
                        if (e.message.includes('ä¸å­˜åœ¨')) {
                            // Gist ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°çš„
                            showToast('Gist ä¸å­˜åœ¨ï¼Œæ­£åœ¨åˆ›å»ºæ–°çš„...', 'warning');
                            const data = getCurrentData();
                            const gist = await createGist(token, data);
                            gistId = gist.id;
                            document.getElementById('gistId').value = gistId;
                            showToast(`âœ… å·²åˆ›å»ºæ–°çš„ Gist: ${gistId}`);
                        } else {
                            throw e;
                        }
                    }
                }

                syncState.gistId = gistId;
                syncState.connected = true;
                
                // ä¿å­˜åˆ° localStorage
                localStorage.setItem('github_sync_config', JSON.stringify({
                    token: token,
                    gistId: gistId,
                    autoSync: false
                }));

                updateSyncStatus('online', 'å·²è¿æ¥');
                updateButtonStates();
                updateLastSyncInfo();
                
            } catch (error) {
                showToast(`âŒ è¿æ¥å¤±è´¥: ${error.message}`, 'error');
                updateSyncStatus('offline', 'è¿æ¥å¤±è´¥');
                console.error(error);
            }
        }

        // ä¸Šä¼ åˆ°äº‘ç«¯
        async function syncUp() {
            if (!syncState.connected) return;

            updateSyncStatus('syncing', 'ä¸Šä¼ ä¸­...');
            
            try {
                const data = getCurrentData();
                await updateGist(syncState.token, syncState.gistId, data);
                
                syncState.lastSyncTime = new Date().toISOString();
                updateSyncStatus('online', 'å·²åŒæ­¥');
                updateLastSyncInfo();
                showToast('âœ… å·²ä¸Šä¼ åˆ°äº‘ç«¯');
                
            } catch (error) {
                showToast(`âŒ ä¸Šä¼ å¤±è´¥: ${error.message}`, 'error');
                updateSyncStatus('online', 'ä¸Šä¼ å¤±è´¥');
            }
        }

        // ä»äº‘ç«¯ä¸‹è½½
        async function syncDown(force = false) {
            if (!syncState.connected) return;

            updateSyncStatus('syncing', 'ä¸‹è½½ä¸­...');
            
            try {
                const result = await getGist(syncState.token, syncState.gistId);
                const remoteData = result.data;
                const localData = getCurrentData();

                // æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®å·®å¼‚
                const hasChanges = 
                    JSON.stringify(localData.watching) !== JSON.stringify(remoteData.watching) ||
                    JSON.stringify(localData.completed) !== JSON.stringify(remoteData.completed) ||
                    JSON.stringify(localData.planned) !== JSON.stringify(remoteData.planned);

                if (hasChanges && !force) {
                    // æ˜¾ç¤ºå†²çªè§£å†³å¯¹è¯æ¡†
                    showConflictModal(remoteData);
                    updateSyncStatus('online', 'éœ€è¦è§£å†³å†²çª');
                    return;
                }

                loadData(remoteData);
                syncState.lastSyncTime = new Date().toISOString();
                updateSyncStatus('online', 'å·²åŒæ­¥');
                updateLastSyncInfo();
                showToast('âœ… å·²ä»äº‘ç«¯ä¸‹è½½');
                
            } catch (error) {
                showToast(`âŒ ä¸‹è½½å¤±è´¥: ${error.message}`, 'error');
                updateSyncStatus('online', 'ä¸‹è½½å¤±è´¥');
            }
        }

        // æ˜¾ç¤ºå†²çªè§£å†³å¯¹è¯æ¡†
        function showConflictModal(remoteData) {
            const modal = document.getElementById('conflictModal');
            modal.classList.add('show');
            
            // ç»‘å®šæŒ‰é’®äº‹ä»¶
            document.getElementById('keepLocalBtn').onclick = () => {
                modal.classList.remove('show');
                syncUp(); // ä¸Šä¼ æœ¬åœ°ç‰ˆæœ¬è¦†ç›–äº‘ç«¯
            };
            
            document.getElementById('keepCloudBtn').onclick = () => {
                modal.classList.remove('show');
                loadData(remoteData);
                syncState.lastSyncTime = new Date().toISOString();
                updateSyncStatus('online', 'å·²åŒæ­¥');
                updateLastSyncInfo();
                showToast('âœ… å·²ä½¿ç”¨äº‘ç«¯ç‰ˆæœ¬');
            };
            
            document.getElementById('mergeBtn').onclick = () => {
                modal.classList.remove('show');
                const localData = getCurrentData();
                const merged = mergeData(localData, remoteData);
                loadData(merged);
                syncUp(); // åˆå¹¶åä¸Šä¼ 
                showToast('âœ… å·²åˆå¹¶å¹¶ä¸Šä¼ ');
            };
            
            document.getElementById('cancelSyncBtn').onclick = () => {
                modal.classList.remove('show');
                updateSyncStatus('online', 'å·²å–æ¶ˆ');
            };
        }

        // è‡ªåŠ¨åŒæ­¥åˆ‡æ¢
        function toggleAutoSync() {
            syncState.autoSync = !syncState.autoSync;
            const btn = document.getElementById('autoSyncBtn');
            
            if (syncState.autoSync) {
                btn.textContent = 'ğŸ”„ è‡ªåŠ¨åŒæ­¥: å¼€';
                btn.style.background = 'rgba(16, 185, 129, 0.3)';
                showToast('å·²å¼€å¯è‡ªåŠ¨åŒæ­¥ï¼ˆç¼–è¾‘å 3 ç§’è‡ªåŠ¨ä¸Šä¼ ï¼‰');
                
                // è®¾ç½®è‡ªåŠ¨åŒæ­¥ç›‘å¬å™¨
                setupAutoSyncListener();
            } else {
                btn.textContent = 'ğŸ”„ è‡ªåŠ¨åŒæ­¥';
                btn.style.background = '';
                showToast('å·²å…³é—­è‡ªåŠ¨åŒæ­¥');
            }
            
            // ä¿å­˜é…ç½®
            const config = JSON.parse(localStorage.getItem('github_sync_config') || '{}');
            config.autoSync = syncState.autoSync;
            localStorage.setItem('github_sync_config', JSON.stringify(config));
        }

        let autoSyncTimer = null;
        function setupAutoSyncListener() {
            // ç›‘å¬æ•°æ®å˜åŒ–ï¼Œå»¶è¿Ÿ 3 ç§’åè‡ªåŠ¨ä¸Šä¼ 
            const observer = new MutationObserver(() => {
                if (!syncState.autoSync || !syncState.connected) return;
                
                clearTimeout(autoSyncTimer);
                autoSyncTimer = setTimeout(() => {
                    syncUp();
                }, 3000);
            });
            
            observer.observe(document.getElementById('listWatching'), { childList: true, subtree: true });
            observer.observe(document.getElementById('listUsuk'), { childList: true, subtree: true });
            observer.observe(document.getElementById('listAsia'), { childList: true, subtree: true });
            observer.observe(document.getElementById('listMovie'), { childList: true, subtree: true });
            observer.observe(document.getElementById('listPlanned'), { childList: true, subtree: true });
        }

        // æ–­å¼€è¿æ¥
        function disconnect() {
            syncState = {
                connected: false,
                token: '',
                gistId: '',
                lastSyncTime: null,
                autoSync: false
            };
            
            localStorage.removeItem('github_sync_config');
            
            document.getElementById('githubToken').value = '';
            document.getElementById('gistId').value = '';
            
            updateSyncStatus('offline', 'æœªè¿æ¥');
            updateButtonStates();
            showToast('å·²æ–­å¼€è¿æ¥');
        }

        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        function updateButtonStates() {
            const connected = syncState.connected;
            document.getElementById('connectBtn').disabled = connected;
            document.getElementById('syncUpBtn').disabled = !connected;
            document.getElementById('syncDownBtn').disabled = !connected;
            document.getElementById('autoSyncBtn').disabled = !connected;
            document.getElementById('disconnectBtn').disabled = !connected;
            
            document.getElementById('githubToken').disabled = connected;
            document.getElementById('gistId').disabled = connected;
        }

        // æ¢å¤ä¿å­˜çš„é…ç½®
        function restoreSyncConfig() {
            const config = localStorage.getItem('github_sync_config');
            if (config) {
                try {
                    const parsed = JSON.parse(config);
                    document.getElementById('githubToken').value = parsed.token || '';
                    document.getElementById('gistId').value = parsed.gistId || '';
                    
                    if (parsed.token && parsed.gistId) {
                        // è‡ªåŠ¨è¿æ¥
                        connectToGitHub();
                        
                        if (parsed.autoSync) {
                            setTimeout(() => {
                                toggleAutoSync();
                            }, 1000);
                        }
                    }
                } catch (e) {
                    console.error('æ¢å¤é…ç½®å¤±è´¥', e);
                }
            }
        }

        // ========== åŸæœ‰åŠŸèƒ½ ==========
        
        function toggleSubcategorySelect() {
            const mainCat = document.getElementById('mainCategory').value;
            const subSelect = document.getElementById('subCategory');
            if (mainCat === 'completed') {
                subSelect.classList.remove('hidden');
            } else {
                subSelect.classList.add('hidden');
            }
        }

        function renderAll() {
            watchingTitles.sort(compareTitles);
            completed.usuk.sort(compareTitles);
            completed.asia.sort(compareTitles);
            completed.movie.sort(compareTitles);
            plannedTitles.sort(compareTitles);

            renderList('listWatching', watchingTitles, 'watching');
            renderList('listUsuk', completed.usuk, 'completed', 'usuk');
            renderList('listAsia', completed.asia, 'completed', 'asia');
            renderList('listMovie', completed.movie, 'completed', 'movie');
            renderList('listPlanned', plannedTitles, 'planned');

            document.getElementById('countWatching').innerText = watchingTitles.length;
            document.getElementById('countCompleted').innerText = completed.usuk.length + completed.asia.length + completed.movie.length;
            document.getElementById('countPlanned').innerText = plannedTitles.length;
            document.getElementById('countUsuk').innerText = completed.usuk.length;
            document.getElementById('countAsia').innerText = completed.asia.length;
            document.getElementById('countMovie').innerText = completed.movie.length;
        }

        function renderList(listId, titlesArray, type, subType = '') {
            const ul = document.getElementById(listId);
            if (!ul) return;

            if (titlesArray.length === 0) {
                ul.innerHTML = `<li class="empty-message">âœ¨ æš‚æ— </li>`;
                return;
            }

            let html = '';
            titlesArray.forEach(title => {
                const safeTitle = title.replace(/"/g, '&quot;');
                let buttons = '';
                if (type === 'watching') {
                    buttons = `<div class="item-actions">
                        <button class="item-btn edit-btn" data-type="${type}" data-sub="${subType}" data-title="${safeTitle}">âœï¸</button>
                        <button class="item-btn move-btn" data-type="${type}" data-sub="${subType}" data-title="${safeTitle}">â¡ï¸</button>
                        <button class="item-btn delete-btn" data-type="${type}" data-sub="${subType}" data-title="${safeTitle}">ğŸ—‘ï¸</button>
                    </div>`;
                } else {
                    buttons = `<div class="item-actions">
                        <button class="item-btn edit-btn" data-type="${type}" data-sub="${subType}" data-title="${safeTitle}">âœï¸</button>
                        <button class="item-btn delete-btn" data-type="${type}" data-sub="${subType}" data-title="${safeTitle}">ğŸ—‘ï¸</button>
                    </div>`;
                }

                html += `<li class="movie-item">
                    <span class="movie-title" contenteditable="true" data-type="${type}" data-sub="${subType}" data-oldtitle="${safeTitle}">${title}</span>
                    ${buttons}
                </li>`;
            });
            ul.innerHTML = html;

            ul.querySelectorAll('.movie-title').forEach(span => {
                span.onblur = handleTitleBlur;
                span.onkeydown = (e) => { if(e.key === 'Enter') { e.preventDefault(); span.blur(); } };
            });

            ul.querySelectorAll('.delete-btn').forEach(btn => {
                btn.onclick = handleDelete;
            });

            if (type === 'watching') {
                ul.querySelectorAll('.move-btn').forEach(btn => {
                    btn.onclick = handleMove;
                });
            }

            ul.querySelectorAll('.edit-btn').forEach(btn => {
                btn.onclick = (e) => {
                    const li = e.currentTarget.closest('li');
                    if(li) li.querySelector('.movie-title').focus();
                };
            });
        }

        function handleTitleBlur(e) {
            const span = e.currentTarget;
            const newText = span.innerText.trim();
            const oldTitle = span.dataset.oldtitle;
            const type = span.dataset.type;
            const sub = span.dataset.sub;

            if (!newText || newText === oldTitle) {
                span.innerText = oldTitle;
                return;
            }

            let arr = type === 'watching' ? watchingTitles :
                     type === 'planned' ? plannedTitles :
                     completed[sub];

            if (arr) {
                const idx = arr.findIndex(t => t === oldTitle);
                if (idx !== -1) {
                    arr[idx] = newText;
                    span.dataset.oldtitle = newText;
                    const li = span.closest('li');
                    if (li) {
                        li.querySelectorAll('[data-title]').forEach(btn => {
                            btn.dataset.title = newText;
                        });
                    }
                    renderAll();
                } else {
                    span.innerText = oldTitle;
                }
            }
        }

        function handleDelete(e) {
            const btn = e.currentTarget;
            const title = btn.dataset.title;
            const type = btn.dataset.type;
            const sub = btn.dataset.sub;

            if (type === 'watching') {
                const idx = watchingTitles.findIndex(t => t === title);
                if (idx !== -1) watchingTitles.splice(idx, 1);
            } else if (type === 'planned') {
                const idx = plannedTitles.findIndex(t => t === title);
                if (idx !== -1) plannedTitles.splice(idx, 1);
            } else if (type === 'completed' && sub && completed[sub]) {
                const arr = completed[sub];
                const idx = arr.findIndex(t => t === title);
                if (idx !== -1) arr.splice(idx, 1);
            }
            renderAll();
        }

        function handleMove(e) {
            const btn = e.currentTarget;
            const title = btn.dataset.title;
            const idx = watchingTitles.findIndex(t => t === title);
            if (idx !== -1) {
                watchingTitles.splice(idx, 1);
                completed.usuk.push(title);
                renderAll();
            }
        }

        // ========== å¯¼å‡ºå¤‡ä»½ ==========
        function exportBackup() {
            const data = getCurrentData();
            
            const dateStr = new Date().toISOString().slice(0,10);
            const fileName = `æˆ‘çš„å½±å‰§_${dateStr}.json`;
            
            const jsonStr = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = fileName;
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            URL.revokeObjectURL(link.href);
            
            alert(`âœ… å·²å¯¼å‡ºåˆ°ï¼š${fileName}\nï¼ˆä¿å­˜åœ¨æµè§ˆå™¨ä¸‹è½½ç›®å½•ä¸­ï¼‰`);
        }

        // ========== å¯¼å…¥å¤‡ä»½ ==========
        function importBackup(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (Array.isArray(data.watching) && data.completed && 
                        Array.isArray(data.completed.usuk) && Array.isArray(data.completed.asia) && 
                        Array.isArray(data.completed.movie) && Array.isArray(data.planned)) {
                        
                        loadData(data);
                        alert('âœ… å¯¼å…¥æˆåŠŸï¼');
                    } else {
                        alert('âŒ å¤‡ä»½æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®');
                    }
                } catch (err) {
                    alert('âŒ è§£æå¤±è´¥ï¼šæ— æ•ˆçš„JSONæ–‡ä»¶');
                }
            };
            reader.readAsText(file);
        }

        // ========== äº‹ä»¶ç»‘å®š ==========
        document.getElementById('addBtn').onclick = () => {
            const title = document.getElementById('newTitle').value.trim();
            if (!title) return alert('è¯·è¾“å…¥å‰§å');
            const main = document.getElementById('mainCategory').value;
            const sub = document.getElementById('subCategory').value;
            
            if (main === 'watching') watchingTitles.push(title);
            else if (main === 'planned') plannedTitles.push(title);
            else completed[sub].push(title);

            document.getElementById('newTitle').value = '';
            renderAll();
        };

        document.getElementById('newTitle').onkeypress = (e) => {
            if (e.key === 'Enter') document.getElementById('addBtn').click();
        };

        document.getElementById('exportBtn').onclick = exportBackup;
        
        document.getElementById('fileImport').onchange = (e) => {
            if (e.target.files[0]) importBackup(e.target.files[0]);
            e.target.value = '';
        };
        
        document.getElementById('mainCategory').addEventListener('change', toggleSubcategorySelect);

        // GitHub åŒæ­¥æŒ‰é’®äº‹ä»¶
        document.getElementById('connectBtn').onclick = connectToGitHub;
        document.getElementById('syncUpBtn').onclick = syncUp;
        document.getElementById('syncDownBtn').onclick = () => syncDown(false);
        document.getElementById('autoSyncBtn').onclick = toggleAutoSync;
        document.getElementById('disconnectBtn').onclick = disconnect;

        // ========== åˆå§‹åŒ–æ•°æ® ==========
        function initializeData() {
            // è¿›è¡Œä¸­
            watchingTitles = [
                "ä¸æœŸè€Œæ·¤S01E04", "FBI:å›½é™… S01E01", "FBI:é€šç¼‰è¦çŠ¯S01E01*", "FBIè”é‚¦è°ƒæŸ¥å±€S06E05",
                "å°è¯•S01E02 *>", "åŸå ¡å²©S01E01 5:00", "èœé¸Ÿè€è­¦S06E04", "éƒ½é“ç‹æœS01E09",
                "ç¬¬äº”å…±å’Œå›½E11 9:00", "è¾å°„E01E03", "åå‡»S08E02 5:00", "åæç‰¹å‹¤ç»„S04E04 24:00",
                "æç¬‘ä¸€å®¶äººS01E04*", "æµ·å†›ç½ªæ¡ˆè°ƒæŸ¥å¤„NCIS.L.A.S13E01 *>", "æµ·å†›ç½ªæ¡ˆè°ƒæŸ¥å¤„NCIS.S20E11",
                "æµ·å†›ç½ªæ¡ˆè°ƒæŸ¥å¤„NCISï¼šå¤å¨å¤·S01E01", "é»‘è¢çº å¯Ÿé˜ŸS02E03 1:00", "ç«çº¿è­¦æ¢ä¹‹åŸå§‹éƒ½å¸‚S01E02>",
                "æ°å…‹æ³°å‹’.S01E01", "ç½—æ–¯å¨å°”S03E08", "æ‘©æ–¯æ¢é•¿S01E01", "å‘½æ‚¬ä¸€çº¿.ç‰¹å·¥ç–‘äº‘no limit S03E06",
                "è°‹æ€S02E03*ç™¾åº¦ç½‘ç›˜", "å¹•åå±æœºS01E02*aliyunåº¦ç›˜", "ç¥çƒ¦è­¦æ¢S07E2*>", "ç¥ç§˜åšå£«S13E01",
                "å°‘å¹´è°¢å°”é¡¿S07E01", "åŒå³°S03E01", "é“è¯æ‚¬æ¡ˆS02E06*>", "ä¸‡ç‰©ç”Ÿçµ.ä¸‡ç‰©æ—¢ä¼Ÿå¤§åˆæ¸ºå°S04E01",
                "æˆ‘çˆ±ä¸Šçš„äººæ˜¯å¥‡è‘©S05E09*>9", "æ— è€»å®¶åº­S02E01*>", "æ–°è´¹é›ªå°å§æ¢æ¡ˆé›†S01E03 22:00",
                "èŠåŠ å“¥æ³•åˆ™S01E02*", "ç½ªæ¶é»‘åå•S10E07*", "é‡æ¡ˆç»„å¥³è­¦S02E01", "ç¾ç§‹é‡ŒS02E04",
                "è®¤è¯†çš„å“¥å“¥ 20220611", "RUNNINGMAN", "æƒ…manè½¬è½¬è½¬ 3", "æƒ…ä¹¦060408", "å¤©æ‰å†²å†²å†²",
                "é—²ç€å¹²å˜›å‘¢ 202502221116", "1 2 3 4 å§œé£Ÿå ‚1 èŠ±æ ·é’æ˜¥winnerç¯‡ 5 6å§œé£Ÿå ‚2 å§œé£Ÿå ‚3 å†°å²›çš„ä¸‰é¤ 7 æé£Ÿå ‚ 8 æ˜¥å­£éœ²è¥"
            ];

            // æ¬§ç¾å‰§
            const rawUsuk = [
                "1899 S01E08*", "1992 S01E10*", "9å·ç§˜äº‹S09E06å‰§ç»ˆ*", "çˆ±ï¼Œæ­»äº¡å’Œæœºå™¨äººS04E10*",
                "çŸ®å­æ¯’æ­S03E13*", "å®‰å¤šS02E12*", "å®‰æ£€.ä½†æ„¿å›å¿ƒä¼¼æˆ‘å¿ƒ S04E06*", "å®‰å¦®[å¸Œå°”æ–¯å ¡æƒ¨æ¡ˆ]E04",
                "å®‰å¦®å¡S02E06*", "æš—å¤œæƒ…æŠ¥å‘˜S02E10*", "å¥¥ç»´å°”å·S03E10*", "è‚®è„çš„é»‘è¢‹å­S01E08*",
                "å·´æ¯”ä¼¦æŸæ—S04E12*", "ç™½å±‹å†œåœºE06*", "è±¹[å‰§ç‰ˆ][æ„å¤§åˆ©]", "è´é²ç‰¹å¹½çµS01E04*",
                "è¾¹éš§è°œæ¡ˆ[è‹±]S03E06å‰§ç»ˆ*", "è¾¹ç¼˜ä¸–ç•ŒS01E08*", "å†°è¡€æš´S04E11*", "å†°è¡€æš´S04E11å­£ç»ˆ*",
                "æ³¢å·´Â·è´¹ç‰¹ä¹‹ä¹¦S01E07*", "æ³¢å°”è¾¾å…‹S05E08*", "æŸæ—ä¹‹ç‹—S01E10*", "ä¸å¾—å®‰å®E02*",
                "ä¸å¯é—å¿˜S06E06*", "ä¸åˆ—é¢ å…šå«å†›S01E05*", "ä¸çœ vigilS02E06*", "è±ºç‹¼çš„æ—¥å­S01E10*",
                "æˆå©šæœªæˆæ‹*", "é™ˆå°¸è°œæ¡ˆS01E04*", "é½¿è½®S08E10å‰§ç»ˆ*", "åˆºæ€æ–¯å¤§æ—[ä¿„]*", "ä»æµ·åº•å‡ºå‡»S04E06*",
                "ä¼ å¥‡åŠå…¬å®¤[æ³•å›½]S05E10å‰§ç»ˆ*", "ä¼ å¥‡åŠå…¬å®¤[ç¾å›½]S01E10*", "ä¼ å¥‡å§åº•.æ½œé¾™è°å½±S02E10*",
                "æ˜¥å¤©çš„åä¸ƒä¸ªç¬é—´S01E12*", "å¤§é™†é…’åº—S01E03*", "ä¸œäº¬ç½ªæ¶S02E10*", "ä¸œé—¨S01E06*",
                "èµŒä½ ä¹Ÿä¼šåš/å¤§å·´åŠ«æ¡ˆç–‘äº‘S01E08*", "éƒ½æ˜¯å¥¹çš„é”™S01E08*", "æ¯’æ­.å¢¨è¥¿å“¥S03E10*", "æ¯’æ­S03E10*",
                "å •è½S03E06å‰§ç»ˆ*", "æ³•å¤–ä¹‹å¾’[BRAQUO][æ³•å›½]S04E08å‰§ç»ˆ*", "çŠ¯ç½ªå¿ƒç†S17E10*", "è’å¢ƒç‹‚é€”S01E06*",
                "é«˜å¢™è¾¹çš„æ··ä¹±S04E12*", "æ ¼è«æ‹‰S05E10å‰§ç»ˆ*", "å­¤å›½æ˜¥ç§‹S05E10å‰§ç»ˆ+ä¸ƒç‹å¿…æ­»*", "å¤æˆ˜åœºä¼ å¥‡S07E16*",
                "æµ·è±¹çªå‡»é˜ŸS07E10å‰§ç»ˆ*", "æµ·å†›ç½ªæ¡ˆè°ƒæŸ¥å¤„NCISï¼šæ–°å¥¥å°”è‰¯S07E16å‰§ç»ˆ*", "æ±‰å¨œS03E06å‰§ç»ˆ*",
                "å¥½æ¯äº²S01E06*", "æµ©æ¸ºçŒæ€S01E06*", "é»‘å¸®é¢†åœ°S01E10*", "é»‘é“æ— è¾¹ é»‘é“æ— å›½ç•Œ æˆˆå¾·æ›¼å®¶æ— S01E08*",
                "é»‘å¸†S04E10å‰§ç»ˆ*", "é»‘é¸½S01E06*", "é»‘é•œS07E06*", "é»‘é‡‘æ–°ç§©åºS01E08*", "é»‘æµ·[ä¿„]*",
                "é»‘é¸ŸS01E06*", "é»‘é’±èƒœåœ°S04E14å‰§ç»ˆ*", "çº¢çœ¼èˆªç­S02E06*", "è´è¶é£æš´S01E06*", "åæ²™é—´è°2é›†å…¨*",
                "é»„çŸ³S05E14å‰§ç»ˆ*", "æ··æ²Œå°‘å¹´æ—¶S01E04*", "é­‚å½’æ•…é‡Œ[æ³•ç‰ˆ]S02E08*", "ç«çº¿è­¦æ¢S06E13å‰§ç»ˆ*",
                "ç«æ˜Ÿç”Ÿæ´»S02E08å‰§ç»ˆ*", "åŸºåœ°S01E10å­£ç»ˆ*", "åŸºç£å±±ä¼¯çˆµ[æ„/æ³•2024]E08*", "é—´è°å…”æ´S01E08*",
                "åŠ«æœº7å°æ—¶S01E07*", "æ°å…‹è±æ©.S04E06*", "é‡‘æ–¯é¡¿å¸‚é•¿S04E10*", "è­¦ä¹‹å…‰.ä¸€çº¿è­¦äº‹S03E06*",
                "é•œåƒäººç”ŸS01E06*", "ç»å¤œé€¢ç”ŸS02E06*", "å‡¯ä¼¦Â·çš®é‡ŒS02E03*", "ææ€–é—´è°S01E04[æ³•][ç”µå½±\"åä¸€æœˆ\"å‰§ç‰ˆ]*",
                "æ§æ–¹è¯äºº2é›†å…¨+ç”µå½±1957ç‰ˆ*", "æ‹‰å¸ƒé›·äºšS03E06å‰§ç»ˆ*", "æ‹‰ç§‘å°¼äºšå·çš„æ²‰æ²¡*", "è€å¤´å­S01E07*",
                "æ³ªä¹‹è°·S01E10*", "å†·æ‰æºªS02E03*", "ç¦»äº²å›ä¼—S01E02*", "é›¶é›¶é›¶S01E08*", "é›¶æ—¥é£æš´S01E06*",
                "æµäººS05E06*", "é¾™ä¹‹å®¶æ—S02E08*", "ä¼¦æ•¦é»‘å¸®S03E08*", "æ´›åŸºS02E06*", "å¦ˆå¦ˆæ˜¯æ€æ‰‹S01E06*",
                "æ›¼è¾¾æ´›äººS03E08*", "æ¢…æ ¼é›·æ¢æ¡ˆ[2025]S01E06*", "å¼¥ç•™å›½çš„çˆ±ä¸½ä¸S1E0*", "è¿·å¤±å¤ªç©ºS03E08å‰§ç»ˆ*",
                "è°œæ¢è·¯å¾·ç»´å¸ŒS01E06*", "å¯†å±‹é™Œè·¯S01E06*", "å‘½è¿èˆªç­S04E20å‰§ç»ˆ*", "æ˜æ—¥ä¼ å¥‡S07E13*",
                "è°‹æ€[ä¸¹éº¦ç‰ˆ]S03E10å‰§ç»ˆ*", "å¹•åºœå°†å†›S01E10*", "æ¯ç‹®:ç‰¹åˆ«è¡ŒåŠ¨S01E08*", "ä½ .å®‰çœ ä¹¦åº—S05E10å‰§ç»ˆ*",
                "é€†è½¬å¥‡å…µS04E10å‰§ç»ˆ*", "æ½˜å°¼æ²ƒæ–¯S03E10*", "ä¼é¹…äººS01E08*", "æ¡¥S04E08å‰§ç»ˆ*", "æ¸…é“å¤«S07E10å‰§ç»ˆ+ç”µå½±ç‰ˆ*",
                "æ¸…æ´å·¥S01E03å¼ƒ*", "å»ä»–Xçš„ä¸–ç•ŒS02E08*", "å…¨èƒ½ä¾¦æ¢ç¤¾S02E10*", "æƒæ¬²S06E15*", "æƒæ¬²ç¬¬äºŒç« S03E10*",
                "ç¾¤æ˜ŸS01E08*", "äººç”Ÿå¤æœ¬S01E09*", "æ€æ­»ä¼ŠèŠ™S04E08å‰§ç»ˆ*", "å°‘å¹´é—´è°S03E08*", "è®¾å¾—å…°è°œæ¡ˆS10E06*",
                "åœ£æ®¿æ˜¥ç§‹S01E08*", "ç»…å£«ä»¬S01E08*", "å®¡è®¯å®¤[å¾·å›½]S01E03*", "å®¡è®¯å®¤[æ³•å›½]S01E03*", "å®¡è®¯å®¤[è¥¿ç­ç‰™]S01E03*",
                "å®¡è®¯å®¤[è‹±å›½]S02E04*", "æ—¶é—´æ—…è¡Œè€…çš„å¦»å­S01E06*", "æ—¶ç©ºæ—‹æ¶¡[æ³•å›½]S01E06*", "å¤±é­‚èˆä¼å¾·S02E06*",
                "å¤±åºè¾¹ç¼˜S01E10*", "å°¸ä½“.æœç´¢å°¸é—´çº¿S01E08*", "æ–¯ç‰¹è±å…‹æ¢æ¡ˆé›†S06E04*", "å—œè¡€æ³•åŒ»[æ€é­”é‡ç”Ÿ]S01E10*",
                "ç§å®¶ä¾¦æ¢S05E08*", "å®ˆæœ›å°˜ä¸–S03E08å‰§ç»ˆ*", "æ®Šé€”åŒå½’[è‹±]S02E04*", "å¡”å°”è¨ä¹‹ç‹S01E09*",
                "è³è‚La Mante.S01E06*", "ç‰¹åˆ«å°ç»„TaskS01E07*", "å¤©æ‰.çˆ±å› æ–¯å¦E10*", "åŒæ ·çš„å¤©ç©ºS01E03*",
                "å¤´å·äººè´¨S01E05*", "å¤´å·å¤–äº¤å®˜S03E08*", "å›¾ä¹¦é¦†å‘˜S04E12å‰§ç»ˆ*", "çº¨ç»”å­å¼Ÿ(ä¿„)S03E16*",
                "ä¸‡ç¥æ®¿S01E08*", "ç‹å† S04E10*", "ç»´äº¬ä¼ å¥‡S06E20å‰§ç»ˆ*", "ç»´äº¬ä¼ å¥‡:è‹±çµæ®¿S03E08å‰§ç»ˆ*",
                "ç»´å…°å¾·S01E03*", "ä¸ºå…¨äººç±»S04E10*", "å±é™©å…³ç³»LiasonS01E06*", "æˆ‘çš„å¤©æ‰å¥³å‹S03E08*",
                "æˆ‘ä»¬WIR.S01E12*", "æˆ‘ä»¬çš„çˆ¶è¾ˆS01E03*", "æˆ‘ä»¬çš„ç”·å­©E10*", "æ— ä¸ä¹‹åœ°S01E08*", "æ— å¯æ•‘è¯S02E08*",
                "æ— ç¥S01E07å‰§ç»ˆ*", "æ— å çš„å¤ªç©º.è‹ç©¹æµ©ç€šS06E06å‰§ç»ˆ*", "æ¯‹åº¸ç½®ç–‘S04E03*", "è¢­å‡».æ€¥è¢­(ä¿„)S01E08*",
                "ä¾ æ¢æ°å…‹S01E08*", "å…ˆè§ä¹‹æ˜S02E08å‰§ç»ˆ*", "å°é•‡ç–‘äº‘[è‹±ç‰ˆ]S03E08å‰§ç»ˆ*", "é€é¥æ³•å¤–S06E15å‰§ç»ˆ*",
                "å¹¸ç¦è°·S03E06*", "æ˜Ÿé™…è¿·èˆª:å‘ç°å·.çŸ­é€”S01E04*", "æ˜Ÿé™…è¿·èˆª:å‘ç°å·S05E10å‰§ç»ˆ*", "æ˜Ÿé™…è¿·èˆª:çš®å¡ç‰¹S03E10*",
                "æ˜Ÿé™…è¿·èˆª:å¥‡å¼‚æ–°ä¸–ç•ŒS02E10*", "è¡Œå°¸èµ°è‚‰S11E24å‰§ç»ˆ*", "è¡Œå°¸èµ°è‚‰:å­˜æ´»ä¹‹äººS01E06*", "è¡Œå°¸èµ°è‚‰:æ­»äº¡ä¹‹åŸS02E08*",
                "è¡Œå°¸èµ°è‚‰:è¾¾é‡Œå°”Â·è¿ªå…‹æ£®S02E06*", "è¡Œå°¸ä¹‹æƒ§S08E12*", "æ‚¬æ¡ˆè§£ç S01E09*", "æ©è€³ç›—é‚»S01E09*",
                "å¤œç©ºS01E08*", "ä¸€è§¦å³å‘S02E06*", "ä¾æ³•ç›¸çˆ±*", "ä¼Šæ™®å…‹é›·æ–¯æ¡£æ¡ˆS01E06*", "å¼‚æ˜Ÿç¾å˜S02E08*",
                "æµ´è¡€é»‘å¸®S06E06å‰§ç»ˆ*", "è¿œå¤å…¥ä¾µS05E06*", "è¶Šæ´‹æ•‘æ´S01E07*", "æœˆä¹‹æš—é¢S02E16[ä¿„]*", "æˆ˜å£«S03E10*",
                "å é¢†åŒºS03E06*", "æ”¿å®¢ä¹‹å¤«*", "çœŸç›¸æ•æ‰TheCapturesS02E06å­£ç»ˆ*", "äº‰åˆ†å¤ºç§’TIME3é›†å…¨*",
                "å­ä¸é›¨ åŒå§å¥‡æ¢.é›¨å¥³S05E08*", "çº¸é’å±‹S05E10å‰§ç»ˆ*", "çª’é£ä¹‹ä¸­S03E08*", "ä¸­é—´äººå…ˆç”ŸS03E09*",
                "ç»ˆæåå•S01E08*", "é‡ä»»åœ¨è‚©S06E07*", "è¶³çƒæ•™ç»ƒTed LassoS03E12å‰§ç»ˆ*", "ç½ªæ¶é»‘åå•S09E22*",
                "æœ€åçš„è­¦å¯Ÿ[æ³•å›½ç‰ˆ]S04E08å‰§ç»ˆ*", "æœ€åçš„æ›™å…‰.å…¨çƒå±æœºS01E05*", "æœ€åç”Ÿè¿˜è€…S02E07*", "è¿½å‡¶S02E04"
            ];
            completed.usuk = rawUsuk.map(cleanAsterisk).filter(t => t !== '');

            // æ—¥éŸ©å‰§
            const rawAsia = [
                "1%çš„å¯èƒ½æ€§[2016]*", "365ï¼šé€†è½¬å‘½è¿çš„1å¹´*", "W*ä¸¤ä¸ªä¸–ç•Œ*", "çˆ±å¡«æ»¡ç©ºç™½*", "å¥”å‘çˆ±æƒ…Run On16é›†å…¨*",
                "æ¯•ä¸š*", "ä¸éœ€è¦çˆ±çš„å¤å¤©*", "å¸ƒæ‹‰æ ¼æ‹äºº*", "è¶…èƒ½å¼‚æ—*", "åˆæ‹[æ»¡å²›å…‰]*", "æ˜¥å¤œ*", "å•æ‹åŸå£°å¸¦*",
                "ç¬¬äºŒæ¬¡20å²*", "ç¬¬ä¸€æ¬¡é‡è§èŠ±é¦™çš„é‚£åˆ»*", "ä¸œäº¬å¤ªé˜³é›¨*", "å¯¹ä¸èµ·ï¼Œæˆ‘çˆ±ä½ *", "äºŒåäº”ï¼ŒäºŒåä¸€*",
                "æ¶ç¼˜*", "éè‡ªç„¶æ­»äº¡*", "ç²‰çº¢ç†è®º[æ³°]*", "è¿‡æ¥æŠ±æŠ±æˆ‘*", "ç‹—å’Œç‹¼çš„æ—¶é—´*", "è±ªæ°æ˜¥é¦™*", "æµ·å²¸æ‘æ°æ°æ°*",
                "é»‘æš—è£è€€ I+II*", "é»‘è‰²å¤ªé˜³+ç‰¹è¾‘[è«æ¯”ä¹Œæ–¯]*", "ç‹ç‹¸å•Šä½ å¹²å•¥å‘¢*", "èŠ±æ ·å¹´å*ç”Ÿå¦‚å¤èŠ±*", "ç«è½¦[æ™¯æ”¶çœŸ]*",
                "ç«é¸Ÿ*", "ææ¶éé“1*3*", "ç»§æ¯ä¸å¥³å„¿çš„è“è°ƒ+2020SP+2022SP*", "ç»“å©šå¥‘çº¦*", "é‡‘ç§‘é•¿*", "æµªå®¢è¡Œ*",
                "æ³ªä¹‹å¥³ç‹.çœ¼æ³ªå¥³ç‹*", "é•°ä»“æ®¿çš„13äºº*", "æ‹çˆ±å¤§æˆ˜*", "æ‹äºº(2018æç‘é•‡)*", "æ‹äºº(2023å—å®«ç‰)*",
                "ä¸¤ä¸ªäººçš„ç‹¬è§’æˆ*", "å¦ˆå¦ˆæœ‹å‹çš„å„¿å­ *", "ç¾å¦™äººç”Ÿ[éŸ©]*", "æ¢¦å¹»æƒ…ä¾£*", "ç§˜å¯†æ£®æ—[1+2]*", "å¯†ä¼š*",
                "æ˜æ˜Ÿçš„æ‹äºº*", "é‚£ä¸ªç”·äººçš„è®°å¿†æ³•*", "é‚£å¹´å†¬å¤©,é£åœ¨å¹*", "é‚£å¹´ï¼Œæˆ‘ä»¬çš„å¤å¤©*", "ä½ æ¥è‡ªå“ªé¢—æ˜Ÿ*",
                "å¹³æ¸…ç››*", "å¥‡æ€ªçš„æ­æ¡£*", "å·§å…‹åŠ›*", "å¼ºåŠ›ä¾¦å¯Ÿé˜Ÿ.H.I.Té‡æ¡ˆç»„*", "äº²çˆ±çš„æ©ä¸œå•Š*", "è®¤è¯†çš„å¦»å­[æ—¥ç‰ˆ+éŸ©ç‰ˆ]*",
                "ä»æ˜¾ç‹åçš„ç”·äºº*", "ä»åŒ»*", "æ—¥æœ¬æ²‰æ²¡*å¸Œæœ›ä¹‹äºº*", "æ±‚å©šå¤§ä½œæˆ˜+SP*", "ä¸‰æµä¹‹è·¯*", "ç¤¾å†…ç›¸äº²*",
                "æ£®æ—*", "å¥¹çš„ç§ç”Ÿæ´»*", "å¥¹å¾ˆæ¼‚äº®*", "ç”œèœœé—´è°*", "å¤©ç©ºä¹‹åŸ[2018éŸ©å‰§]*", "The K2*", "Transit Girl*",
                "æ‹–æ—…è¡Œç®±çš„å¥³äºº*", "æ–‡æ£®ä½*", "æˆ‘çš„è§£æ”¾æ—¥å¿—*", "æˆ‘çš„IDæ˜¯æ±Ÿå—ç¾äºº*", "æˆ‘çš„å®Œç¾ç§˜ä¹¦*", "æˆ‘ä»¬éƒ½æ— æ³•æˆä¸ºå¤§äºº*",
                "æˆ‘ä»¬çš„è“è°ƒ*", "æˆ‘äº²çˆ±çš„æœ‹å‹ä»¬*", "æˆ‘ä¹Ÿæ˜¯èŠ±*", "æ— æ³•æŠ—æ‹’çš„ä»–E01~å¼ƒ*", "æ— æƒ…éƒ½å¸‚*", "é™·å…¥çº¯æƒ…*",
                "ç°åœ¨æ‹¨æ‰“çš„ç”µè¯*", "æ–°å©šç”œå¿ƒæ˜¯åŒäº‹*", "å¹¸ç¦ä¼½èœå­çš„å¿«ä¹æ€æ‰‹ç”Ÿæ´»*", "é›ªæ»´èŠ±*", "è¡€è°œæ‹¼å›¾*",
                "é›ªä¹‹å¥³ç‹*", "é˜³å…‰å…ˆç”Ÿ*", "è€€çœ¼*", "ä¹‰ç»*", "ä¸€èµ·åƒæ™šé¤å—*", "åŒ»ç”Ÿä»¬*", "è¡£è¢–çº¢é•¶è¾¹*",
                "ä»¥ç¥ä¹‹åï¼šä¿¡ä»°çš„èƒŒå›*", "ä»¥å¾ä¹‹å8é›†å…¨*", "æœ‰é’±ç”·ä¸è´«ç©·å¥³*", "äºæ˜Ÿé™ä¹‹å¤œ9é›†å…¨*", "å®‡å®™å«ç»™æˆ‘*",
                "é±¿é±¼æ¸¸æˆ9é›†å…¨*", "åªæ˜¯ç›¸çˆ±çš„å…³ç³»*", "æ²»æ„ˆè€…*", "é‡å‡»*", "æŸä¸Šä»Šæ—¥å­çš„å¤‡å¿˜å½•*", "ä¸»å›çš„å¤ªé˜³*",
                "è¿½è¸ªè€…æ¸¸æˆW èŒæƒéªšæ‰°çš„ä¸Šå¸æ˜¯æˆ‘çš„å‰å¥³å‹*"
            ];
            completed.asia = rawAsia.map(cleanAsterisk).filter(t => t !== '');

            // ç”µå½±
            const rawMovie = [
                "2012*", "é˜¿ä¿®ç½—*", "çˆ±å› æ–¯å¦ä¸çˆ±ä¸é¡¿*", "çˆ±æƒ…å¥‡é‡è®°*", "å¥¥æ—åŒ¹äºšè¡—åŒº*", "å…«é¢åŸ‹ä¼*",
                "ç–¤é¢ç…æ˜Ÿ*", "å‘åŠ£çš„è¡—å¤´*", "å¿…æ­»å‰‘é¸Ÿåˆº*", "å¿…èƒœçƒæ¢*", "ç¼–å·24 Nr. 24*", "å…µä¸´åŸä¸‹*",
                "æ³¢æ–¯è¯­è¯¾*", "æ›¾ç»*", "åˆºæ€ç›–ä¸–å¤ªä¿+ç±»äººçŒ¿è¡ŒåŠ¨*", "åˆºæ€æ®ç‚¹*", "ä¸‘å¥³å¤§ç¿»èº«*",
                "ç©¿æ¡çº¹ç¡è¡£çš„ç”·å­©*", "å¤§ä½¬Brother[åŒ—é‡æ­¦]*", "æ­è®ªçš„æ³•åˆ™*", "ç™»é™†ä¹‹æ—¥*", "ç¬¬åäºŒä¸ªäºº*",
                "ç‚¹çƒæˆé‡‘*", "F1:ç‹‚é£™é£è½¦*", "éå¸¸çªç„¶[æ¸¯]*", "é«˜åœ°æˆ˜*", "é©å‘½å¾€äº‹*", "è¿‡å¾€äººç”Ÿ*",
                "å…±çŠ¯è€…ä»¬.å¸®å‡¶*", "å…±åŠ©1+2*", "å“ˆå°”æ»¨*", "å’Œå£°*", "é»‘æš—é¢*", "é»‘è¢‹è¡ŒåŠ¨*",
                "çº¢åå­—ï¼šå¥³äººä»¬çš„å…¥ä¼é€šçŸ¥å•*", "è½°ç‚¸æœºä¹‹æ­Œ*", "é»„æµ·*", "ç°å½±äºº*", "èŠ±æŸèˆ¬çš„æ‹çˆ±*",
                "æ´»åŸ‹*", "ç«çƒ§å¤©å ‚é•‡*", "æé€Ÿè½¦ç‹*", "ç–¾é€Ÿè¿½æ€1*4*", "ç–¾é€Ÿè¿½æ€*èŠ­è•¾æ€å§¬*", "å®¶æ—è£èª‰1*",
                "ç¦é—­å²›*", "æƒŠå¤©è¥æ•‘1+2*", "ä¹æœˆäº”æ—¥*", "JSAå…±åŒè­¦å¤‡åŒº*", "å±€å†…äºº[éŸ©å›½ åŠ é•¿ç‰ˆ]*",
                "å†³æ–—çŠ¹é©¬é•‡*", "ä¼šè®¡åˆºå®¢1+2*", "è€æ‰‹*", "é›·éœ†ç‰¹æ”»é˜Ÿ*", "åˆ©åˆƒå‡ºé˜*", "é‡Œæ–¯æœ¬ä¸¸æ²‰æ²¡*",
                "çƒˆæ—¥é˜³å…‰[ä¿„]*", "ç¡«ç£ºå²›çš„æ¥ä¿¡*", "å¦ˆå¦ˆå’ªå‘€1+2*", "æ¼«ç”»å¨é¾™ä¹‹å¤§è¯ç‰¹åŠ¡*", "æ›¼è”é‡ç”Ÿ*",
                "ç¾å›½å†…æˆ˜*", "ç¾å›½å¾€äº‹*", "æ¢…æ ¼é›·çš„é™·é˜±/æ¢…æ ¼é›·çš„äº¡è€…/æ¢…æ ¼é›·çš„åå­—è·¯å£å¤œ/æ¢…æ ¼é›·çš„è’™é©¬ç‰¹*",
                "ç›Ÿçº¦*", "å¯†é˜³*", "é¸£æ¢æµ·æˆ˜*", "æ˜æ˜ŸåŠ©ç†*", "é‚£å¤©çš„æ°›å›´*", "æ€’ç« é‡æ¡ˆ*",
                "å¥³ç‹™å‡»æ‰‹/å¡ç“¦æ–¯æ‰˜æ³¢å°”æˆ˜*", "å‰å“¨*", "æ€æ­»æ¯”å°”1+2*", "æ€æ‰‹é¢åŒ…å¸ˆ*", "ä¸‰æ–¹å›½ç•Œ*",
                "ç››å¤çš„æ–¹ç¨‹å¼*", "ä¼¸å†¤äºº1+2+3*", "åä¸‰åˆºå®¢*", "åä¸‰æ¡å‘½+è¥æ•‘é‡çŒªé˜Ÿ/å¥‡è¿¹æ•‘æ´+æ³°å›½æ´ç©´æ•‘æ´[çºªå½•ç‰‡]*",
                "ä¸–ä¸Šæœ€ç¾çš„ç¦»åˆ«*", "è‹èŠ¬æˆ˜äº‰*", "ç¬æ¯å…¨å®‡å®™*", "åä¸€æœˆ*", "é€ƒç¦»ç´¢æ¯”å ¡*", "å¥—è£…/èª“ä¸ä½å¤´*",
                "ç‰¹å·¥è€çˆ¸*", "ç”œèœœçš„äººç”Ÿ*", "çªè¢­1+2", "ä¸‡æ¹–ä¼šè®®+é˜´è°‹*", "ç‹è€…2017*", "æˆ‘çˆ±ä½ [2011éŸ©å›½]*",
                "æˆ‘è®°å¾—.å„å¿†è¿½å‡¶*", "æˆ‘æ˜¯å±±å§†*", "æ— å¤„é€¢ç”Ÿ*", "æ— åæˆ˜å£«*", "æ— å§“ä¹‹äºº*", "è¥¿éƒ¨å¾€äº‹*",
                "å«Œç–‘äºº[éŸ©å›½]*", "ç°åœ¨å»è§ä½ [å­™è‰ºç]*", "å‘æ—¥è‘µ*", "å°å¦ˆå¦ˆ*", "æ‘‡æ»šé»‘å¸®*", "ä¸€ä¹å››å››*",
                "ä¸€å‘½*", "å¹½çµ[éŸ©ç‰ˆé£å£°]*", "æµ´è¡€åæ²™*", "ä¸çŠ¯ç½ªçš„æˆ˜äº‰ï¼šåå®¶ä¼™çš„å…¨ç››æ—¶ä»£*", "ç‚¸è¯å±‹*",
                "å†æ¬¡å‡ºå‘ä¹‹çº½çº¦é‡è§ä½  Begin Again/æ­Œæ›²æ”¹å˜äººç”Ÿ*", "å†è§æˆ‘ä»¬çš„å¹¼å„¿å›­*", "æˆ˜Â·äº‰ Warfare (2025)*",
                "è´¼å·¢1+2*", "åªæœ‰ä½ [éŸ©å­ç ]*", "å­å¼¹åˆ—è½¦*", "è‡´å‘½æœ€å‰çº¿/æœ€åçš„å‰çº¿[ä¿„]*", "é‡é‡‘å±å¤©å›¢/é‡‘å±éœ¸ä¸»*",
                "ç»ˆæå¯¹å¼ˆ*", "æœ€åçš„å†³æ–—*", "æœ€æ™®é€šçš„æ‹çˆ±*", "å¥é¸£æ›²[åŒ—é‡æ­¦]*", "å è½*", "åº§å¤´å¸‚1962*",
                "åº§å¤´å¸‚2003*", "é£ç­/æ½œä¼/æš—ç®—/é»æ˜ä¹‹å‰/æ‚¬å´–/èª“è¨€æ— å£°/èª“è¨€æ°¸æ’*"
            ];
            completed.movie = rawMovie.map(cleanAsterisk).filter(t => t !== '');

            // è®¡åˆ’ä¸­
            plannedTitles = [
                "æ­»çš„èµç¾",
                "å¾…ï¼š ä¸¹éº¦å‰§*æ€€ç–‘  æŸæ—ä¹‹ç‹— ç¬¬åä¸‰ä½ä½¿å¾’ åŠŸå‹‹ï¼šæå»¶å¹´ æˆ‘ä»¬çš„çˆ¶è¾ˆ  å­¤ç‹¬çš„  è¾¾å¥‡ä¸è‰è‰   è¨å¸ƒä¸½å¨œçš„æƒŠå¿ƒå†’é™©/æ²³è°·é•‡ é—´è°ä¹‹å¦»",
                "ç‡ƒçƒ§å¥³å­çš„è‚–åƒ   æ˜¥å¤œ å®¶é—¨çš„è£å…‰ healer åˆ¶ä½œäºº",
                "æœ€åä¹‹èˆ  éƒ½å¸‚ç”·å¥³çš„çˆ±æƒ…æ³•åˆ™ é˜¿æ–¯è¾¾å¹´ä»£è®° è¶…çº§å·¨æ˜ŸæŸ³ç™½ ã€ã€#é”¦ç»£ä½³äºº#/#Wives and Daughters#ã€‘[1999][è‹±å‰§]ã€‘ ã€Šå¥¹å¾ˆæ¼‚äº®ã€‹é»„æ­£éŸ³ã€æœ´å™ä¿Š  ã€ŠåŠ æ²¹å§å¨åŸºåŸºã€‹ã€ã€Šæ¯äº²ã€‹å‰æ°¸å°ç™¾åˆã€æµ…é‡å¿ ä¿¡*ç™¾åº¦ç½‘ç›˜ä¸­ã€‘å¾·é²çº³é…’åº—iu   LIVE  åˆ¶ä½œäºº é»‘å¸† æ¨±å§¬ å­¤é¸½é•‡ è‡´å‘½æœ€å‰çº¿  æ¶ä½œå‰§ä¹‹å»  å¥‡æ€ªçš„æ­æ¡£  ç«å£çš„ä¸¤äºº æ²‰ç¡è€… å¦»å­å˜æˆå°å­¦ç”Ÿ",
                "å†æ¬¡æˆ‘çš„äººç”Ÿ   ä¸æ±—å…š æ´›åŸè­¦äº‹[å¤¸å…‹ç›˜]   çŸ®å­æ¯’æ­[é˜¿é‡Œäº‘ç›˜]",
                "çœŸçˆ±æ•…äº‹*è‹±å‰§  ä½ æ˜¯æˆ‘çš„æ˜¥å¤©",
                "ã€Šå°è¯•ã€‹ç¬¬ä¸‰å­£ï¼Œè‹¹æœ Apple+ å‡ºå“ï¼Œè¶…é«˜å£ç¢‘è‹±å‰§ï¼Œè±†ç“£9.3åˆ†ã€‚",
                "ç½ªæ¡ˆç¬¬å…­æ„Ÿ  é¢„çº¦çˆ±æƒ…",
                "è·¨è¶Šå½©è™¹2002**ç™¾åº¦äº‘ç›˜",
                "å¤§æ²³å‰§:æ–°é€‰ç»„/é¾™é©¬ä¼ /å†›å¸ˆå®˜å…µå«[è¿…é›·äº‘ç›˜OK]  å¥³åŸä¸»ç›´è™/ç¬ƒå§¬/ç‹¬çœ¼é¾™æ”¿å®—/æ­¦ç”°ä¿¡ç„/æ˜¥æ—¥å±€/",
                "ä¹¦å•ï¼šä¸‡ç¦ç›åˆ©äºšè®¡åˆ’",
                "ä»Šæ‘æ˜Œå¼˜ å®«éƒ¨Eç¾é›ª é’å´æœ‰å¾",
                "æ—¥æœ¬ã€Šç”µå½±æ—¬æŠ¥ã€‹æ‚å¿—å…¬å¸ƒ2024å¹´åº¦åä½³æ—¥å½±ï¼š",
                "1.ã€Šé»æ˜çš„ä¸€åˆ‡ã€‹",
                "2.ã€Šçº³ç±³æ¯”äºšæ²™æ¼ ã€‹",
                "3.ã€Šé‚ªæ¶ä¸å­˜åœ¨ã€‹",
                "4.ã€Šäº‘ã€‹",
                "4.ã€Šæˆ‘çš„é˜³å…‰ã€‹",
                "6.ã€Šæˆ‘ç”Ÿæ´»çš„ä¸¤ä¸ªä¸–ç•Œã€‹",
                "7.ã€Šè“¦ç„¶å›é¦–ã€‹",
                "8.ã€Šæš´åŠ«é’æ˜¥ï¼šæˆ‘ä»¬æ— æ³•é˜»æŒ¡2ã€‹",
                "9.ã€Šæœ€åçš„é‡Œç¨‹ã€‹",
                "10.ã€Šæè¿ã€‹",
                "11.ã€Šç®±ç”·ã€‹",
                "è‹±é›„å¿—  ç¨»è‰ä¹‹ç›¾"
            ];

            renderAll();
            toggleSubcategorySelect();
            
            // æ¢å¤åŒæ­¥é…ç½®
            restoreSyncConfig();
        }

        initializeData();
    })();
</script>
</body>
</html>
